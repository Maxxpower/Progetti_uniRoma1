<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<meta charset="ISO-8859-1"></meta>
	<title>BeeSales</title>
	<link href="./css/styles.css" rel="stylesheet" type="text/css" />
	<link href="./jquery-ui-1.11.4.custom/jquery-ui.css" rel="stylesheet" />
	<style>
body {
	font: 62.5% "Trebuchet MS", sans-serif;
	margin: 50px;
}

.demoHeaders {
	margin-top: 2em;
}

#dialog-link {
	padding: .4em 1em .4em 20px;
	text-decoration: none;
	position: relative;
}

#dialog-link span.ui-icon {
	margin: 0 5px 0 0;
	position: absolute;
	left: .2em;
	top: 50%;
	margin-top: -8px;
}

#icons {
	margin: 0;
	padding: 0;
}

#icons li {
	margin: 2px;
	position: relative;
	padding: 4px 0;
	cursor: pointer;
	float: left;
	list-style: none;
}

#icons span.ui-icon {
	float: left;
	margin: 0 4px;
}

.fakewindowcontain .ui-widget-overlay {
	position: absolute;
}

select {
	width: 200px;
}
</style>


	<script type="text/javascript" src="./scripts/utils.js" />
	<script src="./jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
	<script src="./jquery-ui-1.11.4.custom/jquery-ui.js"></script>
	<script>
		//Script Jquery per JqueryUI

		$(document).ready(function() {

			$(".date").datepicker();

			$(".quantita").spinner({
				min : 0.1,
				step : 0.1,
				numberFormat : "n"
			});
			$(".incasso").spinner({
				min : 0.5,
				step : 0.5,
				numberFormat : "c"
			});

			$(".menuTendina").selectmenu();

			$(".button").button();

			$('.accordion').accordion();

		});

		function reloadJqueryUI() {

			$(".date").datepicker();

			$(".quantita").spinner({
				min : 0.1,
				step : 0.1,
				numberFormat : "n"
			});
			$(".incasso").spinner({
				min : 0.5,
				step : 0.5,
				numberFormat : "c"
			});

			$(".menuTendina").selectmenu();

			$(".button").button();

			$('.accordion').accordion();

		}
	</script>
</h:head>
<h:body>



	<fieldset>
		<h1 align="center">Benvenuto in BeeSales, Il registro vendite di
			MieleImperioli</h1>
	</fieldset>

	<fieldset class="accordion">

		<h3 align="center">Inserisci una nuova vendita</h3>
		<h:form>
		<div align="center">
		<h:panelGrid columns="3">

			

				<label>Data vendita</label>
				<br></br>
				<h:inputText id="dataven" class="date" value="#{venditaBean.data}"
					required="true" requiredMessage="Inserisci una data"
					converterMessage="L'elemento inserito deve essere una data">
					<f:convertDateTime pattern="MM/dd/yy" />
					<f:validator validatorId="dateValidator"/>
					<f:ajax event="mouseup" render="dataError"/>
				</h:inputText>
				<h:message id="dataError" for="dataven" />
				<br></br>
				<label>Varieta di Miele</label>
				<br></br>
				<h:selectOneMenu id="tipo" value="#{venditaBean.tipoMiele}"
					class="menuTendina" required="true"
					requiredMessage="Seleziona la varieta di miele">
					<f:selectItem itemLabel="--Seleziona varieta--"></f:selectItem>
					<f:selectItems value="#{venditaBean.tipiMiele}" var="miele"
						itemLabel="#{miele}" itemValue="#{miele}"></f:selectItems>
						<f:ajax event="mouseover" render="tipoError"> </f:ajax>
				</h:selectOneMenu>
				<h:message id="varError" for="tipo" />
				<br></br>
				<label>Tipo di confezione</label>
				<br></br>
				<h:selectOneRadio id="tipoBarattolo"
					value="#{venditaBean.tipoBarattolo}" required="true"
					requiredMessage="Seleziona il tipo di confezione">
					<f:selectItem itemValue="Barattolo" itemLabel="Barattolo"></f:selectItem>
					<f:selectItem itemValue="Squeezer" itemLabel="Squeezer"></f:selectItem>
					<f:ajax event="mouseup" render="tipoError"> </f:ajax>
				</h:selectOneRadio>
				<h:message id="tipoError" for="tipoBarattolo"/>
				<br></br>
				<label>Quantita (in Kg)</label>
				<br></br>
				<h:inputText id="qt" class="quantita"
					value="#{venditaBean.quantitaKg}" required="true"
					requiredMessage="Inserisci la quantita (Kg)"
					validatorMessage="Quantita minima 0.1kg">
					<f:validateDoubleRange minimum="0.1"/>
					<f:ajax event="mouseover" render="qtError"/>
				</h:inputText>
				<h:message id="qtError" for="qt" />
				<br></br>
				<label>Incasso (in €)</label>
				<br></br>
				<h:inputText id="money" class="incasso" value="#{venditaBean.incasso}"
					required="true" requiredMessage="Inserisci l'incasso (€)"
					validatorMessage="Quantita minima 0.50€">
					<f:validateDoubleRange minimum="0.5"/>
					<f:ajax event="mouseover" render="moError"/>
				</h:inputText>
				<h:message id="moError" for="money" />
				<br></br>
				<h:commandButton action="#{venditaBean.inserisciVendita}"
					value="Inserisci Nuova Vendita" class="button">

					<f:ajax execute="@form" render="resultTable"></f:ajax>

				</h:commandButton>
				</h:panelGrid>

			
		</div>



			<h2>Storico Generale Vendite</h2>
			<h:dataTable id="resultTable" var="vend"
				value="#{venditaBean.storico}" border="1" styleClass="mainTable"
				headerClass="heading" rowClasses="even,odd" >
				<h:column>
					<f:facet name="header">Data vendita</f:facet>
					<!-- <h:selectBooleanCheckbox value="#{vend.editabile}"><f:ajax render="@form" /></h:selectBooleanCheckbox> -->
					<h:outputText value="#{vend.data}" />


					<!-- <h:inputText class="date" value="#{vend.data}"
						rendered="#{vend.editabile}" /> -->
					<!-- 					<h:commandButton value="Aggiorna" rendered="#{vend.editabile}"> -->
					<!-- 						<f:ajax render="@form" execute="@form" />
					</h:commandButton> -->

				</h:column>
				<h:column>
					<f:facet name="header">Quantita (Kg)</f:facet>
		#{vend.quantitaKg}
		</h:column>
				<h:column>
					<f:facet name="header">Incasso (€)</f:facet>
		#{vend.incasso}
		</h:column>

				<h:column>
					<f:facet name="header">Tipo Miele</f:facet>
		#{vend.tipoMiele}
		</h:column>
				<h:column>
					<f:facet name="header">Tipo Barattolo</f:facet>
		#{vend.tipoBarattolo}
		</h:column>
			</h:dataTable>


		</h:form>






		<h3 align="center">Ricerca vendita</h3>
		<h:form>
			<div id="ricerca">
				<h3>Seleziona Modalita di ricerca</h3>
				<br></br>
				<h:selectOneMenu value="#{ricercaVenditeBean.modoRicerca}"
					class="menuTendina">
					<f:selectItems value="#{ricercaVenditeBean.modiRicerca}" var="modo" />

				</h:selectOneMenu>
				<h:commandButton action="#{ricercaVenditeBean.selezionaModoRicerca}"
					value="Seleziona" class="button">
					<f:ajax execute="@form" render="options" onevent="reloadJqueryUI" />
				</h:commandButton>

			</div>



			<h:panelGroup id="options">

				<h:selectOneMenu value="#{ricercaVenditeBean.meseRicerca}"
					rendered="#{ricercaVenditeBean.mese}" styleClass="menuTendina">
					<f:selectItems value="#{ricercaVenditeBean.mesiAnno}" var="mese"
						itemLabel="#{mese}" itemValue="#{mese}"></f:selectItems>
				</h:selectOneMenu>
				<h:inputText styleClass="date"
					value="#{ricercaVenditeBean.giornoRicerca}"
					rendered="#{ricercaVenditeBean.giorno}">
					<f:convertDateTime pattern="MM/dd/yy" />
				</h:inputText>
				<h:commandButton action="#{ricercaVenditeBean.ricerca}"
					value="Ricerca"
					rendered="#{ricercaVenditeBean.giorno || ricercaVenditeBean.mese || ricercaVenditeBean.anno}"
					styleClass="button">
					<f:ajax execute="@form" render="searchTable" />
				</h:commandButton>
			</h:panelGroup>

			<h:panelGroup id="searchTable">

				<h:dataTable id="searchResultTable"
					value="#{ricercaVenditeBean.risultatoRicerca}" var="vend"
					border="1" styleClass="mainTable" headerClass="heading"
					rowClasses="even,odd"
					rendered="#{not empty ricercaVenditeBean.risultatoRicerca}">

					<h:column>
						<f:facet name="header">Data vendita</f:facet>
						<h:outputText value="#{vend.data}" />
					</h:column>
					<h:column>
						<f:facet name="header">Quantita (Kg)</f:facet>
						#{vend.quantitaKg}
					</h:column>
					<h:column>
						<f:facet name="header">Incasso (€)</f:facet>
						#{vend.incasso}
					</h:column>

					<h:column>
						<f:facet name="header">Tipo Miele</f:facet>
						#{vend.tipoMiele}
					</h:column>
					<h:column>
						<f:facet name="header">Tipo Barattolo</f:facet>
						#{vend.tipoBarattolo}
					</h:column>

				</h:dataTable>





			</h:panelGroup>

		</h:form>




	</fieldset>






</h:body>
</html>