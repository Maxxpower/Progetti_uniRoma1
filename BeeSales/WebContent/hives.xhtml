<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta charset="ISO-8859-1"></meta>
	<title>HivesManager</title>
	<link href="./jquery-ui/jquery-ui.css" rel="stylesheet" />
	<style>
body {
	font: 62.5% "Trebuchet MS", sans-serif;
	margin: 50px;
}

.demoHeaders {
	margin-top: 2em;
}

#dialog-link {
	padding: .4em 1em .4em 20px;
	text-decoration: none;
	position: relative;
}

#dialog-link span.ui-icon {
	margin: 0 5px 0 0;
	position: absolute;
	left: .2em;
	top: 50%;
	margin-top: -8px;
}

#icons {
	margin: 0;
	padding: 0;
}

#icons li {
	margin: 2px;
	position: relative;
	padding: 4px 0;
	cursor: pointer;
	float: left;
	list-style: none;
}

#icons span.ui-icon {
	float: left;
	margin: 0 4px;
}

.fakewindowcontain .ui-widget-overlay {
	position: absolute;
}

.ui-menu {
	width: 200px;
}

.ui-widget-header {
	padding: 0.2em;
}

select {
	width: 200px;
}
</style>


	<script type="text/javascript" src="./scripts/utils.js" />
	<script src="./jquery-ui/external/jquery/jquery.js"></script>
	<script src="./jquery-ui/jquery-ui.js"></script>
</h:head>
<h:body>

	<ui:composition template="template/main_template.xhtml">

		<ui:define name="content">
			<fieldset class="accordion">

				<h3>Inserimento/Upload</h3>
				<div>
					<h:form id="uploadForm" enctype="multipart/form-data">
						<h:panelGrid columns="3">
							<h:inputFile id="xmlUpload" value="#{hiveBean.xmlFile}"
								required="true" requiredMessage="Seleziona un file!">
								<f:validator validatorId="fileValidator" />
							</h:inputFile>
							<h:message id="xmlInErr" for="xmlUpload" styleClass="error" />
							<h:commandButton value="Carica documento"
								action="#{hiveBean.uploadRecord}">
								<f:ajax execute="@form" render="@all" />
							</h:commandButton>

						</h:panelGrid>




					</h:form>





				</div>
				<h3>Tabella Storico</h3>
				<div>
					<h:panelGroup id="storicoArnie" layout="block">
						<h:form id="tableForm">
							<h:dataTable id="tableArnie" value="#{hiveBean.storicoArnie}"
								var="hive" border="1" styleClass="mainTable"
								headerClass="heading" rowClasses="even"
								columnClasses="column3,column2,column2,column2,column2">

								<h:column>
									<f:facet name="header">N. Arnia</f:facet>
									<h:outputText id="NomeArnia" value="#{hive.name}" />
								</h:column>


								<h:column>
									<f:facet name="header">Ultimo Controllo</f:facet>
									<h:outputText id="dataControllo" value="#{hive.checked_at}"
										styleClass="#{hive.getDateColorClass(hive.checked_at)}"
										rendered="#{not hive.editable}">
										<f:convertDateTime dateStyle="full" timeZone="CET" type="date" />
									</h:outputText>
									<h:inputText value="#{hive.checked_at}" class="date"
										rendered="#{hive.editable}" />

								</h:column>

								<h:column>
									<f:facet name="header">Controllo Regina</f:facet>
									<h:outputText id="controlloRegina"
										value="#{hive.queen_bee_checked_at}"
										styleClass="#{hive.getDateColorClass(hive.queen_bee_checked_at)}">
										<f:convertDateTime dateStyle="full" timeZone="CET" type="date" />
									</h:outputText>
									<p:tooltip id="tooltipRegina" for="controlloRegina">
										<li><b>Colore ape regina:</b> <h:outputText
												value="#{not empty hive.queen_bee_color ? hive.queen_bee_color : 'Regina non colorata!'}"
												styleClass="#{not empty hive.queen_bee_color ? 'WHITE_DATE' : 'TOO_OLD_DATE'}" /></li>
										<li><b>Salute ape regina:</b> <h:outputText
												value="#{hive.queen_bee_goodness}" /></li>
									</p:tooltip>
								</h:column>

								<h:column>
									<f:facet name="header">Controllo varroa</f:facet>
									<h:outputText id="controlloVarroa"
										value="#{hive.varroa_checked_at}">
										<f:convertDateTime dateStyle="full" timeZone="CET" type="date" />
									</h:outputText>
									<p:tooltip id="tooltipVarroa" for="controlloVarroa">
										<li><b>Stato varroa: </b> <h:outputText
												value="#{hive.varroa_status}"
												styleClass="#{hive.varroaStateColorClass()}" /></li>
										<li><b>Controllo vassoio: </b> <h:outputText
												value="#{hive.tray_checked_at}"
												styleClass="#{hive.getDateColorClass(hive.tray_checked_at)}">
												<f:convertDateTime dateStyle="full" timeZone="CET"
													type="date" />
											</h:outputText></li>
									</p:tooltip>
								</h:column>

								<h:column>
									<f:facet name="header">Aiuto invernale</f:facet>
									<h:outputText id="winterCheck"
										value="#{hive.candy_supplied_at}"
										styleClass="#{hive.getDateColorClass(hive.candy_supplied_at)}">
										<f:convertDateTime dateStyle="full" timeZone="CET" type="date" />
									</h:outputText>


									<p:tooltip id="tooltipWinter" for="winterCheck">
										<li><b>Controllo sciroppo 1: </b> <h:outputText
												value="#{hive.syrup1_supplied_at}"
												styleClass="#{hive.getDateColorClass(hive.syrup1_supplied_at)}">
												<f:convertDateTime dateStyle="full" timeZone="CET"
													type="date" />
											</h:outputText></li>
										<li><b>Controllo sciroppo 2: </b> <h:outputText
												value="#{hive.syrup2_supplied_at}"
												styleClass="#{hive.getDateColorClass(hive.syrup2_supplied_at)}">
												<f:convertDateTime dateStyle="full" timeZone="CET"
													type="date" />
											</h:outputText></li>
										<li><b>Controllo candito:</b> <h:outputText
												value="#{hive.candy_supplied_at}"
												styleClass="#{hive.getDateColorClass(hive.candy_supplied_at)}">
												<f:convertDateTime dateStyle="full" timeZone="CET"
													type="date" />
											</h:outputText></li>
									</p:tooltip>

								</h:column>

								<h:column>
									<f:facet name="header">Produzione miele</f:facet>
									<h:outputText value="#{hive.honey_production_qty}" />
								</h:column>

								<h:column>
									<f:facet name="header">Modifica</f:facet>
									<h:commandButton id="editB" value="Modifica"
										action="#{hiveBean.setEditableRecord(hive)}"
										rendered="#{not hive.editable}">
										<f:ajax execute="@form" render=" :storicoArnie"
											onevent="reloadJqueryUI" />
									</h:commandButton>


									<h:commandButton id="confirm" value="Applica"
										action="#{hiveBean.editRecordInPlace(hive)}"
										rendered="#{hive.editable}">
										<f:ajax execute="@form" render=" :storicoArnie"
											onevent="reloadJqueryUI" />
									</h:commandButton>

								</h:column>
							</h:dataTable>
						</h:form>
					</h:panelGroup>

				</div>
				<h3>Grafico</h3>
				<div>bla</div>

			</fieldset>
		</ui:define>
	</ui:composition>
</h:body>
</html>